(function(){"use strict";var e={502:function(e,t,r){var a=r(130),s=r(768),o=r(232);const n={id:"app"},i={key:0},l={class:"theme-toggle-container"},d={class:"theme-icon"};function u(e,t,r,a,u,c){const p=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",n,[u.isAuthenticated?((0,s.uX)(),(0,s.CE)("header",i,t[1]||(t[1]=[(0,s.Lk)("nav",{class:"navbar"},[(0,s.Lk)("div",{class:"navbar-brand"},[(0,s.Lk)("h1",null,"Budget Buddy")])],-1)]))):(0,s.Q3)("",!0),(0,s.Lk)("div",l,[(0,s.Lk)("button",{class:"theme-toggle",onClick:t[0]||(t[0]=(...e)=>c.toggleTheme&&c.toggleTheme(...e))},[(0,s.Lk)("span",d,(0,o.v_)(u.isDarkMode?"🌞":"🌙"),1)])]),(0,s.Lk)("main",null,[(0,s.bF)(p,{onAuthenticated:c.setAuthenticated},null,8,["onAuthenticated"])])])}var c={name:"App",data(){return{isAuthenticated:!1,isDarkMode:"dark"===localStorage.getItem("theme")}},methods:{setAuthenticated(e){this.isAuthenticated=e},toggleTheme(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("theme",this.isDarkMode?"dark":"light"),document.documentElement.setAttribute("data-theme",this.isDarkMode?"dark":"light")}},created(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)}},p=r(241);const m=(0,p.A)(c,[["render",u]]);var g=m,h=r(387);const k={class:"login-container"},y={class:"login-card"},f={class:"form-group"},v={class:"form-group"},b={class:"form-actions"},w=["disabled"],L={key:0,class:"error-message"},E={class:"signup-prompt"};function C(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",y,[t[8]||(t[8]=(0,s.Lk)("h2",null,"Welcome to Budget Buddy",-1)),t[9]||(t[9]=(0,s.Lk)("p",{class:"subtitle"},"Take control of your finances today",-1)),(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"])),class:"login-form"},[(0,s.Lk)("div",f,[t[4]||(t[4]=(0,s.Lk)("label",{for:"username"},"Username or Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),required:"",placeholder:"Enter your username or email"},null,512),[[a.Jo,i.username]])]),(0,s.Lk)("div",v,[t[5]||(t[5]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),required:"",placeholder:"Enter your password"},null,512),[[a.Jo,i.password]])]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Logging in...":"Login"),9,w),(0,s.Lk)("button",{type:"button",class:"btn-link",onClick:t[2]||(t[2]=(...e)=>l.forgotPassword&&l.forgotPassword(...e))}," Forgot Password? ")]),i.error?((0,s.uX)(),(0,s.CE)("div",L,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",E,[t[7]||(t[7]=(0,s.Lk)("p",null,"Don't have an account?",-1)),(0,s.bF)(d,{to:"/create-account",class:"btn-secondary"},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.eW)(" Create New Account ")]))),_:1})])])])}var _=r(373),P={name:"LoginPage",data(){return{username:"",password:"",loading:!1,error:null}},methods:{async handleLogin(){this.loading=!0,this.error=null;try{const e=await _.A.post("/api/auth/login",{username:this.username,password:this.password});e.data.access_token&&(localStorage.setItem("token",e.data.access_token),this.$emit("authenticated",!0),this.$router.push("/dashboard"))}catch(e){e.response&&e.response.data.detail?this.error=e.response.data.detail:this.error="An error occurred during login"}finally{this.loading=!1}},forgotPassword(){this.$router.push("/forgot-password")}}};const A=(0,p.A)(P,[["render",C],["__scopeId","data-v-1c3c5a79"]]);var S=A;const x={class:"create-account-container"},D={class:"create-account-card"},$={class:"form-group"},I={class:"form-group"},U={class:"form-group"},X={key:0,class:"error"},B={class:"form-group"},F={key:0,class:"error"},q={class:"form-group"},V={key:0,class:"error"},N={class:"form-group"},O={key:0,class:"error"},J=["disabled"],Q={key:0,class:"error-message"},j={class:"login-prompt"};function M(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("div",D,[t[15]||(t[15]=(0,s.Lk)("h2",null,"Create Your Account",-1)),t[16]||(t[16]=(0,s.Lk)("p",{class:"subtitle"},"Start your journey to financial freedom",-1)),(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"create-account-form"},[(0,s.Lk)("div",$,[t[7]||(t[7]=(0,s.Lk)("label",{for:"firstName"},"First Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":t[0]||(t[0]=e=>i.firstName=e),required:"",placeholder:"Enter your first name"},null,512),[[a.Jo,i.firstName]])]),(0,s.Lk)("div",I,[t[8]||(t[8]=(0,s.Lk)("label",{for:"lastName"},"Last Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":t[1]||(t[1]=e=>i.lastName=e),required:"",placeholder:"Enter your last name"},null,512),[[a.Jo,i.lastName]])]),(0,s.Lk)("div",U,[t[9]||(t[9]=(0,s.Lk)("label",{for:"username"},"Username",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[2]||(t[2]=e=>i.username=e),required:"",placeholder:"Choose a username"},null,512),[[a.Jo,i.username]]),i.usernameError?((0,s.uX)(),(0,s.CE)("span",X,(0,o.v_)(i.usernameError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",B,[t[10]||(t[10]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>i.email=e),required:"",placeholder:"Enter your email"},null,512),[[a.Jo,i.email]]),i.emailError?((0,s.uX)(),(0,s.CE)("span",F,(0,o.v_)(i.emailError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",q,[t[11]||(t[11]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>i.password=e),required:"",placeholder:"Create a password"},null,512),[[a.Jo,i.password]]),i.passwordError?((0,s.uX)(),(0,s.CE)("span",V,(0,o.v_)(i.passwordError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",N,[t[12]||(t[12]=(0,s.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=e=>i.confirmPassword=e),required:"",placeholder:"Confirm your password"},null,512),[[a.Jo,i.confirmPassword]]),i.confirmPasswordError?((0,s.uX)(),(0,s.CE)("span",O,(0,o.v_)(i.confirmPasswordError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Creating Account...":"Create Account"),9,J),i.error?((0,s.uX)(),(0,s.CE)("div",Q,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",j,[t[14]||(t[14]=(0,s.Lk)("p",null,"Already have an account?",-1)),(0,s.bF)(d,{to:"/login",class:"btn-secondary"},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.eW)(" Login ")]))),_:1})])])])}var T={name:"CreateAccount",data(){return{firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:"",loading:!1,error:null,usernameError:null,emailError:null,passwordError:null,confirmPasswordError:null}},methods:{validateForm(){let e=!0;this.usernameError=null,this.emailError=null,this.passwordError=null,this.confirmPasswordError=null,this.username.length<3&&(this.usernameError="Username must be at least 3 characters long",e=!1);const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(this.email)||(this.emailError="Please enter a valid email address",e=!1),this.password.length<8&&(this.passwordError="Password must be at least 8 characters long",e=!1),this.password!==this.confirmPassword&&(this.confirmPasswordError="Passwords do not match",e=!1),e},async handleSubmit(){if(this.password===this.confirmPassword){this.loading=!0,this.error=null;try{const e=await _.A.post("/api/auth/register",{first_name:this.firstName,last_name:this.lastName,username:this.username,email:this.email,password:this.password});"User created successfully"===e.data.message&&(e.data.token&&localStorage.setItem("token",e.data.token),this.$router.push("/setup"))}catch(e){if(e.response)switch(e.response.status){case 400:this.error=e.response.data.detail||"Registration failed";break;case 422:this.error="Please check your input and try again";break;default:this.error="An error occurred. Please try again."}else this.error="Network error. Please try again."}finally{this.loading=!1}}else this.error="Passwords do not match"}}};const R=(0,p.A)(T,[["render",M],["__scopeId","data-v-4d5216ba"]]);var W=R;const z={class:"forgot-password-container"},K={class:"forgot-password-card"},H={class:"form-group"},Y={key:0,class:"error"},G=["disabled"],Z={key:0,class:"error-message"},ee={key:1,class:"success-message"},te={class:"back-to-login"};function re(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",K,[t[8]||(t[8]=(0,s.Lk)("h2",null,"Reset Your Password",-1)),t[9]||(t[9]=(0,s.Lk)("p",{class:"subtitle"},"Enter your email to receive a password reset link",-1)),i.resetSent?((0,s.uX)(),(0,s.CE)("div",ee,[t[5]||(t[5]=(0,s.Lk)("p",null,"A password reset link has been sent to your email.",-1)),t[6]||(t[6]=(0,s.Lk)("p",null," Please check your inbox and follow the instructions to reset your password. ",-1)),(0,s.bF)(d,{to:"/login",class:"btn-secondary"},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.eW)(" Return to Login ")]))),_:1})])):((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:t[2]||(t[2]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"forgot-password-form"},[(0,s.Lk)("div",H,[t[3]||(t[3]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),required:"",placeholder:"Enter your email",onInput:t[1]||(t[1]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[a.Jo,i.email]]),i.emailError?((0,s.uX)(),(0,s.CE)("span",Y,(0,o.v_)(i.emailError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||i.emailError},(0,o.v_)(i.loading?"Sending...":"Send Reset Link"),9,G),i.error?((0,s.uX)(),(0,s.CE)("div",Z,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32)),(0,s.Lk)("div",te,[(0,s.bF)(d,{to:"/login",class:"btn-link"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.eW)(" ← Back to Login ")]))),_:1})])])])}var ae={name:"ForgotPassword",data(){return{email:"",loading:!1,error:null,emailError:null,resetSent:!1}},methods:{validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.email?e.test(this.email)?(this.emailError=null,!0):(this.emailError="Please enter a valid email address",!1):(this.emailError="Email is required",!1)},async handleSubmit(){if(this.validateEmail()){this.loading=!0,this.error=null;try{console.log("Sending request with email:",this.email);const e=await _.A.post("/api/auth/forgot-password",{email:this.email});console.log("Response received:",e.data),e.data.message&&(this.resetSent=!0,this.$router.push({path:"/reset-password",query:{email:this.email}}))}catch(e){if(console.error("Error details:",e.response?.data),404===e.response?.status)this.error="No account found with this email address";else if(422===e.response?.status){const t=e.response.data.detail;Array.isArray(t)?this.error=t[0].msg:this.error="Invalid email format"}else this.error="An error occurred. Please try again."}finally{this.loading=!1}}}}};const se=(0,p.A)(ae,[["render",re],["__scopeId","data-v-0d7decc8"]]);var oe=se;const ne={class:"setup-container"},ie={class:"setup-card"},le={class:"form-group"},de={class:"input-with-symbol"},ue={class:"form-group"},ce={class:"input-with-symbol"},pe={class:"categories-section"},me={class:"category-list"},ge={class:"category-header"},he={class:"category-name"},ke=["onClick"],ye={class:"input-with-symbol"},fe=["onUpdate:modelValue"],ve={key:0,class:"add-category"},be=["value"],we=["disabled"],Le={class:"budget-summary"},Ee={class:"summary-item"},Ce={class:"summary-item"},_e=["disabled"],Pe={key:0,class:"error-message"};function Ae(e,t,r,n,i,l){return(0,s.uX)(),(0,s.CE)("div",ne,[(0,s.Lk)("div",ie,[t[14]||(t[14]=(0,s.Lk)("h2",null,"Set Up Your Budget",-1)),t[15]||(t[15]=(0,s.Lk)("p",{class:"subtitle"},"Let's create a plan that works for you",-1)),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"setup-form"},[(0,s.Lk)("div",le,[t[6]||(t[6]=(0,s.Lk)("label",{for:"income"},"Monthly Income",-1)),(0,s.Lk)("div",de,[t[5]||(t[5]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"income","onUpdate:modelValue":t[0]||(t[0]=e=>i.income=e),required:"",min:"0",step:"0.01",placeholder:"Enter your monthly income"},null,512),[[a.Jo,i.income]])])]),(0,s.Lk)("div",ue,[t[8]||(t[8]=(0,s.Lk)("label",{for:"savings"},"Desired Monthly Savings",-1)),(0,s.Lk)("div",ce,[t[7]||(t[7]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"savings","onUpdate:modelValue":t[1]||(t[1]=e=>i.savings=e),required:"",min:"0",step:"0.01",placeholder:"Enter desired savings"},null,512),[[a.Jo,i.savings]])])]),(0,s.Lk)("div",pe,[t[11]||(t[11]=(0,s.Lk)("h3",null,"Category Allocation",-1)),(0,s.Lk)("div",me,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.categories,((e,r)=>((0,s.uX)(),(0,s.CE)("div",{key:r,class:"category-item"},[(0,s.Lk)("div",ge,[(0,s.Lk)("span",he,(0,o.v_)(r),1),"Other"!==r?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",class:"remove-category",onClick:e=>l.removeCategory(r)}," × ",8,ke)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ye,[t[9]||(t[9]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":e=>i.categories[r]=e,required:"",min:"0",step:"0.01",placeholder:"Enter amount"},null,8,fe),[[a.Jo,i.categories[r]]])])])))),128))]),l.canAddCategory?((0,s.uX)(),(0,s.CE)("div",ve,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.newCategory=e),class:"category-select"},[t[10]||(t[10]=(0,s.Lk)("option",{value:"",disabled:""},"Select a category",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.availableCategories,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,be)))),128))],512),[[a.u1,i.newCategory]]),(0,s.Lk)("button",{type:"button",class:"btn-secondary",onClick:t[3]||(t[3]=(...e)=>l.addCategory&&l.addCategory(...e)),disabled:!i.newCategory}," Add Category ",8,we)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Le,[(0,s.Lk)("div",Ee,[t[12]||(t[12]=(0,s.Lk)("span",null,"Total Allocated:",-1)),(0,s.Lk)("span",null,"$"+(0,o.v_)(l.totalAllocated.toFixed(2)),1)]),(0,s.Lk)("div",Ce,[t[13]||(t[13]=(0,s.Lk)("span",null,"Remaining Budget:",-1)),(0,s.Lk)("span",null,"$"+(0,o.v_)(l.remainingBudget.toFixed(2)),1)])]),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||!l.isValid},(0,o.v_)(i.loading?"Setting Up...":"Complete Setup"),9,_e),i.error?((0,s.uX)(),(0,s.CE)("div",Pe,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32)])])}var Se={name:"SetupPage",data(){return{income:"",savings:"",categories:{Rent:0,Food:0,Transport:0,Utilities:0,Other:0},availableCategories:["Entertainment","Shopping","Healthcare","Education","Travel"],newCategory:"",loading:!1,error:null}},computed:{totalAllocated(){return Object.values(this.categories).reduce(((e,t)=>e+Number(t)),0)},remainingBudget(){return this.income-this.savings-this.totalAllocated},isValid(){return this.income>0&&this.savings>=0&&this.remainingBudget>=0&&Object.values(this.categories).every((e=>e>=0))},canAddCategory(){return Object.keys(this.categories).length<10}},methods:{addCategory(){this.newCategory&&!this.categories[this.newCategory]&&(this.categories[this.newCategory]=0,this.newCategory="")},removeCategory(e){this.$delete(this.categories,e)},async handleSubmit(){if(this.totalAllocated+this.savings>this.income)this.error="Total allocation exceeds income";else{this.loading=!0,this.error=null;try{const e=localStorage.getItem("token"),t=await _.A.post("/api/budget/setup",{income:this.income,savings_goal:this.savings,categories:this.categories,username:e});"Budget setup successful"===t.data.message&&this.$router.push("/dashboard")}catch(e){e.response?this.error=e.response.data.detail||"Failed to setup budget":this.error="Network error. Please try again."}finally{this.loading=!1}}}}};const xe=(0,p.A)(Se,[["render",Ae],["__scopeId","data-v-ce09c736"]]);var De=xe;const $e={class:"dashboard"},Ie={class:"header"},Ue={class:"menu-container"},Xe={key:0,class:"dropdown-menu"},Be={class:"header-content"},Fe={class:"greeting"},qe={class:"date-display"},Ve={class:"content"},Ne={class:"budget-overview"},Oe={class:"budget-card"},Je={class:"budget-amount"},Qe={class:"budget-details"},je={class:"detail-item"},Me={class:"detail-item"},Te={class:"expense-card"},Re={class:"form-group"},We=["value"],ze={class:"form-group"},Ke={class:"input-with-symbol"},He={class:"form-group"},Ye=["disabled"],Ge={key:0,class:"error-message"},Ze={class:"expense-distribution"},et={class:"chart-container"},tt=["src"],rt={key:1,class:"no-data-message"},at={class:"category-list"},st={class:"category-info"},ot={class:"category-name"},nt={class:"category-amount"},it={class:"progress-bar"},lt={class:"expense-history"},dt={class:"expense-controls"},ut={class:"control-group"},ct=["value"],pt={class:"control-group"},mt={class:"control-group"},gt={key:0,class:"expense-list"},ht={class:"expense-info"},kt={class:"expense-category"},yt={class:"expense-amount"},ft={class:"expense-description"},vt={class:"expense-date"},bt=["onClick","disabled"],wt={key:1,class:"no-expenses"};function Lt(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",$e,[(0,s.Lk)("div",Ie,[(0,s.Lk)("div",Ue,[(0,s.Lk)("button",{class:"menu-button",onClick:t[0]||(t[0]=(...e)=>l.toggleMenu&&l.toggleMenu(...e))},t[9]||(t[9]=[(0,s.Lk)("span",{class:"menu-icon"},"☰",-1)])),i.showMenu?((0,s.uX)(),(0,s.CE)("div",Xe,[(0,s.bF)(d,{to:"/profile",class:"menu-item"},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.Lk)("span",{class:"menu-icon"},"👤",-1),(0,s.eW)(" Profile ")]))),_:1}),(0,s.bF)(d,{to:"/edit-budget",class:"menu-item"},{default:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.Lk)("span",{class:"menu-icon"},"💰",-1),(0,s.eW)(" Change Budget Distribution ")]))),_:1}),(0,s.Lk)("button",{class:"menu-item",onClick:t[1]||(t[1]=(...e)=>l.logout&&l.logout(...e))},t[12]||(t[12]=[(0,s.Lk)("span",{class:"menu-icon"},"🚪",-1),(0,s.eW)(" Logout ")]))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Be,[(0,s.Lk)("div",Fe,[(0,s.Lk)("h1",null,"Welcome back, "+(0,o.v_)(i.userInfo.first_name)+"!",1),t[13]||(t[13]=(0,s.Lk)("p",{class:"subtitle"},"Here's your financial overview for today",-1))]),(0,s.Lk)("div",qe,(0,o.v_)(i.currentDate),1)])]),(0,s.Lk)("div",Ve,[(0,s.Lk)("div",Ne,[(0,s.Lk)("div",Oe,[t[16]||(t[16]=(0,s.Lk)("h3",null,"Monthly Budget",-1)),(0,s.Lk)("div",Je," $"+(0,o.v_)(i.budgetSummary.income.toFixed(2)),1),(0,s.Lk)("div",Qe,[(0,s.Lk)("div",je,[t[14]||(t[14]=(0,s.Lk)("span",null,"Savings Goal",-1)),(0,s.Lk)("span",null,"$"+(0,o.v_)(i.budgetSummary.savings_goal.toFixed(2)),1)]),(0,s.Lk)("div",Me,[t[15]||(t[15]=(0,s.Lk)("span",null,"Remaining",-1)),(0,s.Lk)("span",null,"$"+(0,o.v_)(i.budgetSummary.remaining.toFixed(2)),1)])])]),(0,s.Lk)("div",Te,[t[22]||(t[22]=(0,s.Lk)("h3",null,"Add Expense",-1)),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>l.addExpense&&l.addExpense(...e)),["prevent"])),class:"expense-form"},[(0,s.Lk)("div",Re,[t[18]||(t[18]=(0,s.Lk)("label",{for:"category"},"Category",-1)),(0,s.bo)((0,s.Lk)("select",{id:"category","onUpdate:modelValue":t[2]||(t[2]=e=>i.newExpense.category=e),required:""},[t[17]||(t[17]=(0,s.Lk)("option",{value:"",disabled:""},"Select a category",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Object.keys(i.budgetSummary.categories),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,We)))),128))],512),[[a.u1,i.newExpense.category]])]),(0,s.Lk)("div",ze,[t[20]||(t[20]=(0,s.Lk)("label",{for:"amount"},"Amount",-1)),(0,s.Lk)("div",Ke,[t[19]||(t[19]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":t[3]||(t[3]=e=>i.newExpense.amount=e),required:"",min:"0",step:"0.01",placeholder:"Enter amount"},null,512),[[a.Jo,i.newExpense.amount]])])]),(0,s.Lk)("div",He,[t[21]||(t[21]=(0,s.Lk)("label",{for:"description"},"Description",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"description","onUpdate:modelValue":t[4]||(t[4]=e=>i.newExpense.description=e),placeholder:"Add a note (optional)"},null,512),[[a.Jo,i.newExpense.description]])]),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Adding...":"Add Expense"),9,Ye),i.error?((0,s.uX)(),(0,s.CE)("div",Ge,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32)])]),(0,s.Lk)("div",Ze,[t[23]||(t[23]=(0,s.Lk)("h3",null,"Expense Distribution",-1)),(0,s.Lk)("div",et,[i.chartImage?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"data:image/png;base64,"+i.chartImage,alt:"Expense Distribution Chart",class:"chart-image"},null,8,tt)):((0,s.uX)(),(0,s.CE)("div",rt,"No budget data available"))]),(0,s.Lk)("div",at,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.budgetSummary.expenses,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"category-item"},[(0,s.Lk)("div",st,[(0,s.Lk)("span",ot,(0,o.v_)(t),1),(0,s.Lk)("span",nt,"$"+(0,o.v_)(e.toFixed(2)),1)]),(0,s.Lk)("div",it,[(0,s.Lk)("div",{class:"progress",style:(0,o.Tr)({width:l.getProgressPercentage(t)+"%"})},null,4)])])))),128))])]),(0,s.Lk)("div",lt,[t[29]||(t[29]=(0,s.Lk)("h3",null,"Expense History",-1)),(0,s.Lk)("div",dt,[(0,s.Lk)("div",ut,[t[25]||(t[25]=(0,s.Lk)("label",{for:"category-filter"},"Filter by Category:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"category-filter","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedCategory=e)},[t[24]||(t[24]=(0,s.Lk)("option",{value:""},"All Categories",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Object.keys(i.budgetSummary.categories),(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,o.v_)(e),9,ct)))),128))],512),[[a.u1,i.selectedCategory]])]),(0,s.Lk)("div",pt,[t[26]||(t[26]=(0,s.Lk)("label",{for:"search"},"Search:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"search","onUpdate:modelValue":t[7]||(t[7]=e=>i.searchQuery=e),placeholder:"Search by description..."},null,512),[[a.Jo,i.searchQuery]])]),(0,s.Lk)("div",mt,[t[28]||(t[28]=(0,s.Lk)("label",{for:"sort"},"Sort by:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"sort","onUpdate:modelValue":t[8]||(t[8]=e=>i.sortBy=e)},t[27]||(t[27]=[(0,s.Fv)('<option value="date-desc">Date (Newest First)</option><option value="date-asc">Date (Oldest First)</option><option value="amount-desc">Amount (High to Low)</option><option value="amount-asc">Amount (Low to High)</option><option value="category">Category (A-Z)</option>',5)]),512),[[a.u1,i.sortBy]])])]),l.filteredExpenses.length>0?((0,s.uX)(),(0,s.CE)("div",gt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.filteredExpenses,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"expense-item"},[(0,s.Lk)("div",ht,[(0,s.Lk)("span",kt,(0,o.v_)(e.category),1),(0,s.Lk)("span",yt,"$"+(0,o.v_)(e.amount_spent.toFixed(2)),1),(0,s.Lk)("span",ft,(0,o.v_)(e.description),1),(0,s.Lk)("span",vt,(0,o.v_)(l.formatDate(e.created_at)),1)]),(0,s.Lk)("button",{class:"delete-btn",onClick:t=>l.deleteExpense(e.id),disabled:i.loading}," Delete ",8,bt)])))),128))])):((0,s.uX)(),(0,s.CE)("div",wt,"No expenses found."))])])])}var Et={name:"MainPage",data(){return{budgetSummary:{income:0,savings_goal:0,categories:{},expenses:{},remaining:0},userInfo:{first_name:"",last_name:"",username:"",email:""},currentDate:"",chartImage:null,newExpense:{category:"",amount:"",description:""},loading:!1,error:null,showMenu:!1,expenses:[],selectedCategory:"",searchQuery:"",sortBy:"date-desc"}},computed:{filteredCategories(){return Object.fromEntries(Object.entries(this.budgetSummary.categories).filter((([e,t])=>t>0)))},filteredExpenses(){let e=[...this.expenses];if(this.selectedCategory&&(e=e.filter((e=>e.category===this.selectedCategory))),this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.description.toLowerCase().includes(t)))}switch(this.sortBy){case"date-desc":e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)));break;case"date-asc":e.sort(((e,t)=>new Date(e.created_at)-new Date(t.created_at)));break;case"amount-desc":e.sort(((e,t)=>t.amount_spent-e.amount_spent));break;case"amount-asc":e.sort(((e,t)=>e.amount_spent-t.amount_spent));break;case"category":e.sort(((e,t)=>e.category.localeCompare(t.category)));break}return e}},async created(){await this.fetchUserInfo(),await this.fetchBudgetSummary(),await this.fetchChart(),await this.fetchExpenses(),this.updateCurrentDate()},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{handleClickOutside(e){const t=this.$el.querySelector(".menu-container");t&&!t.contains(e.target)&&(this.showMenu=!1)},toggleMenu(){this.showMenu=!this.showMenu},logout(){localStorage.removeItem("token"),this.$emit("authenticated",!1),this.$router.push("/login")},async fetchBudgetSummary(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/budget/summary",{headers:{Authorization:`Bearer ${e}`}});this.budgetSummary=t.data}catch(e){console.error("Error fetching budget summary:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchChart(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/budget/chart",{headers:{Authorization:`Bearer ${e}`}});this.chartImage=t.data.image}catch(e){console.error("Error fetching chart:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchExpenses(){try{const e=await _.A.get("/api/budget/expenses");this.expenses=e.data}catch(e){console.error("Error fetching expenses:",e)}},async addExpense(){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");await _.A.post("/api/budget/expense",this.newExpense,{headers:{Authorization:`Bearer ${e}`}});await this.fetchBudgetSummary(),await this.fetchChart(),await this.fetchExpenses(),this.newExpense={category:"",amount:"",description:""}}catch(e){console.error("Error adding expense:",e),this.error=e.response?.data?.detail||"Failed to add expense"}finally{this.loading=!1}},getProgressPercentage(e){const t=this.budgetSummary.categories[e]||0,r=this.budgetSummary.expenses[e]||0;return r/t*100},async deleteExpense(e){if(confirm("Are you sure you want to delete this expense?")){this.loading=!0;try{await _.A.delete(`/api/budget/expense/${e}`),this.expenses=this.expenses.filter((t=>t.id!==e)),await this.fetchBudgetSummary(),await this.fetchChart()}catch(t){console.error("Error deleting expense:",t),alert("Failed to delete expense. Please try again.")}finally{this.loading=!1}}},formatDate(e){const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},async fetchUserInfo(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/auth/me",{headers:{Authorization:`Bearer ${e}`}});this.userInfo=t.data}catch(e){console.error("Error fetching user info:",e),401===e.response?.status&&this.$router.push("/login")}},updateCurrentDate(){const e=new Date;this.currentDate=e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}};const Ct=(0,p.A)(Et,[["render",Lt]]);var _t=Ct;const Pt={class:"profile"},At={class:"header"},St={class:"header-content"},xt={class:"profile-content"},Dt={class:"user-info"},$t={key:0,class:"loading"},It={key:1,class:"error"},Ut={key:2,class:"info-grid"},Xt={class:"info-item"},Bt={class:"info-item"},Ft={class:"info-item"},qt={class:"info-item"},Vt={class:"password-change"},Nt={class:"form-group"},Ot={class:"form-group"},Jt={class:"form-group"},Qt={key:0,class:"error"},jt=["disabled"],Mt={class:"delete-account"},Tt={class:"form-group"},Rt={class:"form-group"},Wt={key:0,class:"error"},zt=["disabled"];function Kt(e,t,r,n,i,l){return(0,s.uX)(),(0,s.CE)("div",Pt,[(0,s.Lk)("div",At,[(0,s.Lk)("div",St,[(0,s.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},t[8]||(t[8]=[(0,s.Lk)("span",{class:"back-icon"},"←",-1),(0,s.eW)(" Back to Dashboard ")])),t[9]||(t[9]=(0,s.Lk)("h1",null,"Profile Settings",-1))])]),(0,s.Lk)("div",xt,[(0,s.Lk)("div",Dt,[t[14]||(t[14]=(0,s.Lk)("h2",null,"User Information",-1)),i.loading?((0,s.uX)(),(0,s.CE)("div",$t,"Loading...")):i.error?((0,s.uX)(),(0,s.CE)("div",It,(0,o.v_)(i.error),1)):((0,s.uX)(),(0,s.CE)("div",Ut,[(0,s.Lk)("div",Xt,[t[10]||(t[10]=(0,s.Lk)("label",null,"First Name:",-1)),(0,s.Lk)("span",null,(0,o.v_)(i.userInfo.first_name),1)]),(0,s.Lk)("div",Bt,[t[11]||(t[11]=(0,s.Lk)("label",null,"Last Name:",-1)),(0,s.Lk)("span",null,(0,o.v_)(i.userInfo.last_name),1)]),(0,s.Lk)("div",Ft,[t[12]||(t[12]=(0,s.Lk)("label",null,"Username:",-1)),(0,s.Lk)("span",null,(0,o.v_)(i.userInfo.username),1)]),(0,s.Lk)("div",qt,[t[13]||(t[13]=(0,s.Lk)("label",null,"Email:",-1)),(0,s.Lk)("span",null,(0,o.v_)(i.userInfo.email),1)])]))]),(0,s.Lk)("div",Vt,[t[18]||(t[18]=(0,s.Lk)("h2",null,"Change Password",-1)),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"])),class:"password-form"},[(0,s.Lk)("div",Nt,[t[15]||(t[15]=(0,s.Lk)("label",{for:"currentPassword"},"Current Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[1]||(t[1]=e=>i.passwordData.current_password=e),required:""},null,512),[[a.Jo,i.passwordData.current_password]])]),(0,s.Lk)("div",Ot,[t[16]||(t[16]=(0,s.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[2]||(t[2]=e=>i.passwordData.new_password=e),required:"",minlength:"8"},null,512),[[a.Jo,i.passwordData.new_password]])]),(0,s.Lk)("div",Jt,[t[17]||(t[17]=(0,s.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>i.passwordData.confirm_password=e),required:"",minlength:"8"},null,512),[[a.Jo,i.passwordData.confirm_password]])]),i.passwordError?((0,s.uX)(),(0,s.CE)("div",Qt,(0,o.v_)(i.passwordError),1)):(0,s.Q3)("",!0),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.passwordLoading},(0,o.v_)(i.passwordLoading?"Changing...":"Change Password"),9,jt)],32)]),(0,s.Lk)("div",Mt,[t[21]||(t[21]=(0,s.Lk)("h2",null,"Delete Account",-1)),t[22]||(t[22]=(0,s.Lk)("p",{class:"warning"}," Warning: This action cannot be undone. All your data will be permanently deleted. ",-1)),(0,s.Lk)("form",{onSubmit:t[7]||(t[7]=(0,a.D$)(((...e)=>l.confirmDelete&&l.confirmDelete(...e)),["prevent"])),class:"delete-form"},[(0,s.Lk)("div",Tt,[t[19]||(t[19]=(0,s.Lk)("label",{for:"deleteUsername"},"Username",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"deleteUsername","onUpdate:modelValue":t[5]||(t[5]=e=>i.deleteData.username=e),required:"",placeholder:"Enter your username"},null,512),[[a.Jo,i.deleteData.username]])]),(0,s.Lk)("div",Rt,[t[20]||(t[20]=(0,s.Lk)("label",{for:"deletePassword"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"deletePassword","onUpdate:modelValue":t[6]||(t[6]=e=>i.deleteData.password=e),required:"",placeholder:"Enter your password"},null,512),[[a.Jo,i.deleteData.password]])]),i.deleteError?((0,s.uX)(),(0,s.CE)("div",Wt,(0,o.v_)(i.deleteError),1)):(0,s.Q3)("",!0),(0,s.Lk)("button",{type:"submit",class:"btn-danger",disabled:i.deleteLoading},(0,o.v_)(i.deleteLoading?"Deleting...":"Delete Account"),9,zt)],32)])])])}var Ht={name:"Profile",data(){return{userInfo:{first_name:"",last_name:"",username:"",email:""},passwordData:{current_password:"",new_password:"",confirm_password:""},loading:!1,error:null,passwordLoading:!1,passwordError:null,deleteData:{username:"",password:""},deleteLoading:!1,deleteError:null}},async created(){await this.fetchUserInfo()},methods:{async fetchUserInfo(){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/profile/info",{headers:{Authorization:`Bearer ${e}`}});this.userInfo=t.data}catch(e){console.error("Error fetching user info:",e),this.error=e.response?.data?.detail||"Failed to load user information",401===e.response?.status&&this.$router.push("/login")}finally{this.loading=!1}},async changePassword(){if(this.passwordData.new_password===this.passwordData.confirm_password){this.passwordLoading=!0,this.passwordError=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");await _.A.post("/api/profile/change-password",{current_password:this.passwordData.current_password,new_password:this.passwordData.new_password},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.passwordData={current_password:"",new_password:"",confirm_password:""},this.passwordError="Password changed successfully!"}catch(e){console.error("Error changing password:",e),e.response?.data?.detail?Array.isArray(e.response.data.detail)?this.passwordError=e.response.data.detail.join(", "):this.passwordError=e.response.data.detail:this.passwordError="Failed to change password"}finally{this.passwordLoading=!1}}else this.passwordError="New passwords do not match"},async confirmDelete(){if(this.deleteData.username===this.userInfo.username){if(confirm("Are you sure you want to delete your account? This action cannot be undone.")){this.deleteLoading=!0,this.deleteError=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.delete("/api/auth/delete-account",{data:{username:this.deleteData.username,password:this.deleteData.password},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});"Account deleted successfully"===t.data.message&&(localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("budgetData"),localStorage.removeItem("expenses"),this.$store&&this.$store.commit("clearUserData"),this.$router.push("/login"))}catch(e){console.error("Error deleting account:",e),e.response?.data?.detail?this.deleteError=e.response.data.detail:this.deleteError="Failed to delete account"}finally{this.deleteLoading=!1}}}else this.deleteError="Username does not match"},goBack(){this.$router.push("/dashboard")}}};const Yt=(0,p.A)(Ht,[["render",Kt],["__scopeId","data-v-c6ed1ae2"]]);var Gt=Yt;const Zt={class:"reset-password-container"},er={class:"reset-password-card"},tr={class:"form-group"},rr={key:0,class:"error"},ar={class:"form-group"},sr={key:0,class:"error"},or=["disabled"],nr={key:0,class:"error-message"},ir={class:"back-to-login"};function lr(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Zt,[(0,s.Lk)("div",er,[t[8]||(t[8]=(0,s.Lk)("h2",null,"Reset Your Password",-1)),t[9]||(t[9]=(0,s.Lk)("p",{class:"subtitle"},"Enter your new password",-1)),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"reset-password-form"},[(0,s.Lk)("div",tr,[t[5]||(t[5]=(0,s.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[0]||(t[0]=e=>i.newPassword=e),required:"",minlength:"8",placeholder:"Enter new password",onInput:t[1]||(t[1]=(...e)=>l.validatePassword&&l.validatePassword(...e))},null,544),[[a.Jo,i.newPassword]]),i.passwordError?((0,s.uX)(),(0,s.CE)("span",rr,(0,o.v_)(i.passwordError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ar,[t[6]||(t[6]=(0,s.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),required:"",minlength:"8",placeholder:"Confirm new password",onInput:t[3]||(t[3]=(...e)=>l.validatePassword&&l.validatePassword(...e))},null,544),[[a.Jo,i.confirmPassword]]),i.confirmError?((0,s.uX)(),(0,s.CE)("span",sr,(0,o.v_)(i.confirmError),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||i.passwordError||i.confirmError},(0,o.v_)(i.loading?"Resetting...":"Reset Password"),9,or),i.error?((0,s.uX)(),(0,s.CE)("div",nr,(0,o.v_)(i.error),1)):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",ir,[(0,s.bF)(d,{to:"/login",class:"btn-link"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.eW)(" ← Back to Login ")]))),_:1})])])])}var dr={name:"ResetPassword",data(){return{newPassword:"",confirmPassword:"",loading:!1,error:null,passwordError:null,confirmError:null}},methods:{validatePassword(){return this.passwordError=null,this.confirmError=null,this.newPassword.length<8?(this.passwordError="Password must be at least 8 characters long",!1):this.newPassword===this.confirmPassword||(this.confirmError="Passwords do not match",!1)},async handleSubmit(){if(this.validatePassword()){this.loading=!0,this.error=null;try{console.log("Sending reset password request");const e=await _.A.post("/api/auth/reset-password",{token:this.$route.query.email,new_password:this.newPassword});console.log("Response received:",e.data),"Password updated successfully"===e.data.message&&this.$router.push("/login")}catch(e){if(console.error("Error details:",e.response?.data),422===e.response?.status){const t=e.response.data.detail;Array.isArray(t)?this.error=t[0].msg:this.error="Invalid password format"}else 400===e.response?.status?this.error="Invalid reset token":this.error="An error occurred. Please try again."}finally{this.loading=!1}}}}};const ur=(0,p.A)(dr,[["render",lr],["__scopeId","data-v-2b17c19d"]]);var cr=ur;const pr={class:"edit-budget"},mr={class:"header"},gr={class:"budget-form"},hr={class:"form-group"},kr={class:"input-with-symbol"},yr={class:"form-group"},fr={class:"input-with-symbol"},vr={class:"categories"},br={class:"category-list"},wr={class:"category-header"},Lr=["onUpdate:modelValue"],Er={class:"input-with-symbol"},Cr=["onUpdate:modelValue"],_r={key:0,class:"error-message"},Pr={class:"form-actions"},Ar=["disabled"];function Sr(e,t,r,n,i,l){const d=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",pr,[(0,s.Lk)("div",mr,[t[5]||(t[5]=(0,s.Lk)("h1",null,"Edit Budget Distribution",-1)),(0,s.bF)(d,{to:"/dashboard",class:"back-button"},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.eW)("← Back to Dashboard")]))),_:1})]),(0,s.Lk)("div",gr,[(0,s.Lk)("div",hr,[t[7]||(t[7]=(0,s.Lk)("label",{for:"income"},"Monthly Income",-1)),(0,s.Lk)("div",kr,[t[6]||(t[6]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",id:"income","onUpdate:modelValue":t[0]||(t[0]=e=>i.income=e),required:"",min:"0",step:"0.01",placeholder:"Enter monthly income"},null,512),[[a.Jo,i.income]])])]),(0,s.Lk)("div",yr,[t[9]||(t[9]=(0,s.Lk)("label",{for:"savings"},"Savings Goal (%)",-1)),(0,s.Lk)("div",fr,[(0,s.bo)((0,s.Lk)("input",{type:"number",id:"savings","onUpdate:modelValue":t[1]||(t[1]=e=>i.savingsPercentage=e),required:"",min:"0",max:"100",step:"1",placeholder:"Enter savings percentage"},null,512),[[a.Jo,i.savingsPercentage]]),t[8]||(t[8]=(0,s.Lk)("span",{class:"symbol"},"%",-1))])]),(0,s.Lk)("div",vr,[t[11]||(t[11]=(0,s.Lk)("h3",null,"Category Distribution",-1)),(0,s.Lk)("div",br,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.categories,((e,r)=>((0,s.uX)(),(0,s.CE)("div",{key:r,class:"category-item"},[(0,s.Lk)("div",wr,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t,placeholder:"Category name",required:""},null,8,Lr),[[a.Jo,e.name]]),(0,s.Lk)("div",Er,[t[10]||(t[10]=(0,s.Lk)("span",{class:"symbol"},"$",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.amount=t,required:"",min:"0",step:"0.01",placeholder:"Amount",class:(0,o.C4)({"error-input":l.hasCategoryError(e.name)})},null,10,Cr),[[a.Jo,e.amount]])])]),l.hasCategoryError(e.name)?((0,s.uX)(),(0,s.CE)("div",_r," Cannot reduce budget below current spending of $"+(0,o.v_)(l.getCategorySpending(e.name).toFixed(2)),1)):(0,s.Q3)("",!0)])))),128))]),(0,s.Lk)("button",{class:"add-category",onClick:t[2]||(t[2]=(...e)=>l.addCategory&&l.addCategory(...e))}," + Add Category ")]),(0,s.Lk)("div",Pr,[(0,s.Lk)("button",{class:"btn-primary",onClick:t[3]||(t[3]=(...e)=>l.updateBudget&&l.updateBudget(...e)),disabled:i.loading||l.hasErrors},(0,o.v_)(i.loading?"Updating...":"Update Budget"),9,Ar)])])])}var xr={name:"EditBudget",data(){return{income:0,savingsPercentage:0,categories:[],currentSpending:{},loading:!1,error:null}},computed:{hasErrors(){return this.categories.some((e=>this.hasCategoryError(e.name)))}},async created(){await this.fetchCurrentBudget(),await this.fetchCurrentSpending()},methods:{async fetchCurrentBudget(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/budget/summary",{headers:{Authorization:`Bearer ${e}`}});this.income=t.data.income,this.savingsPercentage=t.data.savings_goal/t.data.income*100,this.categories=Object.entries(t.data.categories).map((([e,t])=>({name:e,amount:t})))}catch(e){console.error("Error fetching budget:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchCurrentSpending(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await _.A.get("/api/budget/expenses",{headers:{Authorization:`Bearer ${e}`}});this.currentSpending=t.data.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount_spent,e)),{})}catch(e){console.error("Error fetching expenses:",e)}},addCategory(){this.categories.push({name:"",amount:0})},hasCategoryError(e){const t=this.getCategorySpending(e),r=this.categories.find((t=>t.name===e));return r&&r.amount<t},getCategorySpending(e){return this.currentSpending[e]||0},async updateBudget(){if(!this.hasErrors){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=this.income*this.savingsPercentage/100,r=this.categories.reduce(((e,t)=>(e[t.name]=t.amount,e)),{});await _.A.post("/api/budget/update",{income:this.income,savings_goal:t,categories:r},{headers:{Authorization:`Bearer ${e}`}}),this.$router.push("/dashboard")}catch(e){console.error("Error updating budget:",e),this.error=e.response?.data?.detail||"Failed to update budget"}finally{this.loading=!1}}}}};const Dr=(0,p.A)(xr,[["render",Sr],["__scopeId","data-v-2e9a6b1a"]]);var $r=Dr;const Ir=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:S},{path:"/create-account",name:"CreateAccount",component:W},{path:"/forgot-password",name:"ForgotPassword",component:oe},{path:"/reset-password",name:"ResetPassword",component:cr},{path:"/setup",name:"Setup",component:De,meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:_t,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:Gt,meta:{requiresAuth:!0}},{path:"/edit-budget",name:"EditBudget",component:$r,meta:{requiresAuth:!0}}],Ur=(0,h.aE)({history:(0,h.LA)(),routes:Ir});Ur.beforeEach(((e,t,r)=>{const a=e.matched.some((e=>e.meta.requiresAuth)),s=localStorage.getItem("token");a&&!s?r("/login"):r()}));var Xr=Ur;_.A.defaults.baseURL="https://budget-buddy-backend-41557050751.us-central1.run.app",_.A.defaults.headers.common["Content-Type"]="application/json",_.A.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),_.A.interceptors.response.use((e=>e),(e=>(e.response?(console.error("Error response:",e.response.data),401===e.response.status&&(localStorage.removeItem("token"),Xr.push("/login"))):e.request?console.error("Error request:",e.request):console.error("Error message:",e.message),Promise.reject(e))));const Br=(0,a.Ef)(g);Br.use(Xr),Br.mount("#app")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,a,s,o){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],o=e[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(r.O).every((function(e){return r.O[e](a[l])}))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,s,o]}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,o,n=a[0],i=a[1],l=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(l)var u=l(r)}for(t&&t(a);d<n.length;d++)o=n[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},a=self["webpackChunkbudget_buddy_frontend"]=self["webpackChunkbudget_buddy_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(502)}));a=r.O(a)})();