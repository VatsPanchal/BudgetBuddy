(function(){"use strict";var e={124:function(e,t,r){var s=r(130),a=r(768),o=r(232);const n={id:"app"},i={key:0},l={class:"theme-toggle-container"},d={class:"theme-icon"};function u(e,t,r,s,u,c){const p=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",n,[u.isAuthenticated?((0,a.uX)(),(0,a.CE)("header",i,t[1]||(t[1]=[(0,a.Lk)("nav",{class:"navbar"},[(0,a.Lk)("div",{class:"navbar-brand"},[(0,a.Lk)("h1",null,"Budget Buddy")])],-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",l,[(0,a.Lk)("button",{class:"theme-toggle",onClick:t[0]||(t[0]=(...e)=>c.toggleTheme&&c.toggleTheme(...e))},[(0,a.Lk)("span",d,(0,o.v_)(u.isDarkMode?"üåû":"üåô"),1)])]),(0,a.Lk)("main",null,[(0,a.bF)(p,{onAuthenticated:c.setAuthenticated},null,8,["onAuthenticated"])])])}var c={name:"App",data(){return{isAuthenticated:!1,isDarkMode:"dark"===localStorage.getItem("theme")}},methods:{setAuthenticated(e){this.isAuthenticated=e},toggleTheme(){this.isDarkMode=!this.isDarkMode,localStorage.setItem("theme",this.isDarkMode?"dark":"light"),document.documentElement.setAttribute("data-theme",this.isDarkMode?"dark":"light")}},created(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e)}},p=r(241);const m=(0,p.A)(c,[["render",u]]);var g=m,h=r(387);const k={class:"login-container"},y={class:"login-card"},f={class:"form-group"},v={class:"form-group"},b={class:"form-actions"},w=["disabled"],L={key:0,class:"error-message"},E={class:"signup-prompt"};function C(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",y,[t[8]||(t[8]=(0,a.Lk)("h2",null,"Welcome to Budget Buddy",-1)),t[9]||(t[9]=(0,a.Lk)("p",{class:"subtitle"},"Take control of your finances today",-1)),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"])),class:"login-form"},[(0,a.Lk)("div",f,[t[4]||(t[4]=(0,a.Lk)("label",{for:"username"},"Username or Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),required:"",placeholder:"Enter your username or email"},null,512),[[s.Jo,i.username]])]),(0,a.Lk)("div",v,[t[5]||(t[5]=(0,a.Lk)("label",{for:"password"},"Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),required:"",placeholder:"Enter your password"},null,512),[[s.Jo,i.password]])]),(0,a.Lk)("div",b,[(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Logging in...":"Login"),9,w),(0,a.Lk)("button",{type:"button",class:"btn-link",onClick:t[2]||(t[2]=(...e)=>l.forgotPassword&&l.forgotPassword(...e))}," Forgot Password? ")]),i.error?((0,a.uX)(),(0,a.CE)("div",L,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32),(0,a.Lk)("div",E,[t[7]||(t[7]=(0,a.Lk)("p",null,"Don't have an account?",-1)),(0,a.bF)(d,{to:"/create-account",class:"btn-secondary"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)(" Create New Account ")]))),_:1})])])])}var _=r(373);const P=_.A.create({baseURL:"/api"});P.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));var S=P,A={name:"LoginPage",data(){return{username:"",password:"",loading:!1,error:null}},methods:{async handleLogin(){this.loading=!0,this.error=null;try{const e=await S.post("/auth/login",{username:this.username,password:this.password});e.data.access_token&&(localStorage.setItem("token",e.data.access_token),this.$emit("authenticated",!0),this.$router.push("/dashboard"))}catch(e){e.response&&e.response.data.detail?this.error=e.response.data.detail:this.error="An error occurred during login"}finally{this.loading=!1}},forgotPassword(){this.$router.push("/forgot-password")}}};const x=(0,p.A)(A,[["render",C],["__scopeId","data-v-3966dea2"]]);var D=x;const $={class:"create-account-container"},I={class:"create-account-card"},U={class:"form-group"},X={class:"form-group"},B={class:"form-group"},F={key:0,class:"error"},q={class:"form-group"},V={key:0,class:"error"},N={class:"form-group"},O={key:0,class:"error"},J={class:"form-group"},Q={key:0,class:"error"},j=["disabled"],M={key:0,class:"error-message"},T={class:"login-prompt"};function R(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",$,[(0,a.Lk)("div",I,[t[15]||(t[15]=(0,a.Lk)("h2",null,"Create Your Account",-1)),t[16]||(t[16]=(0,a.Lk)("p",{class:"subtitle"},"Start your journey to financial freedom",-1)),(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"create-account-form"},[(0,a.Lk)("div",U,[t[7]||(t[7]=(0,a.Lk)("label",{for:"firstName"},"First Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":t[0]||(t[0]=e=>i.firstName=e),required:"",placeholder:"Enter your first name"},null,512),[[s.Jo,i.firstName]])]),(0,a.Lk)("div",X,[t[8]||(t[8]=(0,a.Lk)("label",{for:"lastName"},"Last Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":t[1]||(t[1]=e=>i.lastName=e),required:"",placeholder:"Enter your last name"},null,512),[[s.Jo,i.lastName]])]),(0,a.Lk)("div",B,[t[9]||(t[9]=(0,a.Lk)("label",{for:"username"},"Username",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[2]||(t[2]=e=>i.username=e),required:"",placeholder:"Choose a username"},null,512),[[s.Jo,i.username]]),i.usernameError?((0,a.uX)(),(0,a.CE)("span",F,(0,o.v_)(i.usernameError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",q,[t[10]||(t[10]=(0,a.Lk)("label",{for:"email"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>i.email=e),required:"",placeholder:"Enter your email"},null,512),[[s.Jo,i.email]]),i.emailError?((0,a.uX)(),(0,a.CE)("span",V,(0,o.v_)(i.emailError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",N,[t[11]||(t[11]=(0,a.Lk)("label",{for:"password"},"Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>i.password=e),required:"",placeholder:"Create a password"},null,512),[[s.Jo,i.password]]),i.passwordError?((0,a.uX)(),(0,a.CE)("span",O,(0,o.v_)(i.passwordError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",J,[t[12]||(t[12]=(0,a.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[5]||(t[5]=e=>i.confirmPassword=e),required:"",placeholder:"Confirm your password"},null,512),[[s.Jo,i.confirmPassword]]),i.confirmPasswordError?((0,a.uX)(),(0,a.CE)("span",Q,(0,o.v_)(i.confirmPasswordError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Creating Account...":"Create Account"),9,j),i.error?((0,a.uX)(),(0,a.CE)("div",M,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32),(0,a.Lk)("div",T,[t[14]||(t[14]=(0,a.Lk)("p",null,"Already have an account?",-1)),(0,a.bF)(d,{to:"/login",class:"btn-secondary"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)(" Login ")]))),_:1})])])])}var W={name:"CreateAccount",data(){return{firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:"",loading:!1,error:null,usernameError:null,emailError:null,passwordError:null,confirmPasswordError:null}},methods:{validateForm(){let e=!0;this.usernameError=null,this.emailError=null,this.passwordError=null,this.confirmPasswordError=null,this.username.length<3&&(this.usernameError="Username must be at least 3 characters long",e=!1);const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(this.email)||(this.emailError="Please enter a valid email address",e=!1),this.password.length<8&&(this.passwordError="Password must be at least 8 characters long",e=!1),this.password!==this.confirmPassword&&(this.confirmPasswordError="Passwords do not match",e=!1),e},async handleSubmit(){if(this.password===this.confirmPassword){this.loading=!0,this.error=null;try{const e=await S.post("/auth/register",{first_name:this.firstName,last_name:this.lastName,username:this.username,email:this.email,password:this.password});"User created successfully"===e.data.message&&(e.data.token&&localStorage.setItem("token",e.data.token),this.$router.push("/setup"))}catch(e){if(e.response)switch(e.response.status){case 400:this.error=e.response.data.detail||"Registration failed";break;case 422:this.error="Please check your input and try again";break;default:this.error="An error occurred. Please try again."}else this.error="Network error. Please try again."}finally{this.loading=!1}}else this.error="Passwords do not match"}}};const z=(0,p.A)(W,[["render",R],["__scopeId","data-v-172c78d9"]]);var K=z;const H={class:"forgot-password-container"},Y={class:"forgot-password-card"},G={class:"form-group"},Z={key:0,class:"error"},ee=["disabled"],te={key:0,class:"error-message"},re={key:1,class:"success-message"},se={class:"back-to-login"};function ae(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("div",Y,[t[8]||(t[8]=(0,a.Lk)("h2",null,"Reset Your Password",-1)),t[9]||(t[9]=(0,a.Lk)("p",{class:"subtitle"},"Enter your email to receive a password reset link",-1)),i.resetSent?((0,a.uX)(),(0,a.CE)("div",re,[t[5]||(t[5]=(0,a.Lk)("p",null,"A password reset link has been sent to your email.",-1)),t[6]||(t[6]=(0,a.Lk)("p",null," Please check your inbox and follow the instructions to reset your password. ",-1)),(0,a.bF)(d,{to:"/login",class:"btn-secondary"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)(" Return to Login ")]))),_:1})])):((0,a.uX)(),(0,a.CE)("form",{key:0,onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"forgot-password-form"},[(0,a.Lk)("div",G,[t[3]||(t[3]=(0,a.Lk)("label",{for:"email"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),required:"",placeholder:"Enter your email",onInput:t[1]||(t[1]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[s.Jo,i.email]]),i.emailError?((0,a.uX)(),(0,a.CE)("span",Z,(0,o.v_)(i.emailError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||i.emailError},(0,o.v_)(i.loading?"Sending...":"Send Reset Link"),9,ee),i.error?((0,a.uX)(),(0,a.CE)("div",te,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32)),(0,a.Lk)("div",se,[(0,a.bF)(d,{to:"/login",class:"btn-link"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)(" ‚Üê Back to Login ")]))),_:1})])])])}var oe={name:"ForgotPassword",data(){return{email:"",loading:!1,error:null,emailError:null,resetSent:!1}},methods:{validateEmail(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.email?e.test(this.email)?(this.emailError=null,!0):(this.emailError="Please enter a valid email address",!1):(this.emailError="Email is required",!1)},async handleSubmit(){if(this.validateEmail()){this.loading=!0,this.error=null;try{console.log("Sending request with email:",this.email);const e=await S.post("/auth/forgot-password",{email:this.email});console.log("Response received:",e.data),e.data.message&&(this.resetSent=!0,this.$router.push({path:"/reset-password",query:{email:this.email}}))}catch(e){if(console.error("Error details:",e.response?.data),404===e.response?.status)this.error="No account found with this email address";else if(422===e.response?.status){const t=e.response.data.detail;Array.isArray(t)?this.error=t[0].msg:this.error="Invalid email format"}else this.error="An error occurred. Please try again."}finally{this.loading=!1}}}}};const ne=(0,p.A)(oe,[["render",ae],["__scopeId","data-v-e01aa5a8"]]);var ie=ne;const le={class:"setup-container"},de={class:"setup-card"},ue={class:"form-group"},ce={class:"input-with-symbol"},pe={class:"form-group"},me={class:"input-with-symbol"},ge={class:"categories-section"},he={class:"category-list"},ke={class:"category-header"},ye={class:"category-name"},fe=["onClick"],ve={class:"input-with-symbol"},be=["onUpdate:modelValue"],we={key:0,class:"add-category"},Le=["value"],Ee=["disabled"],Ce={class:"budget-summary"},_e={class:"summary-item"},Pe={class:"summary-item"},Se=["disabled"],Ae={key:0,class:"error-message"};function xe(e,t,r,n,i,l){return(0,a.uX)(),(0,a.CE)("div",le,[(0,a.Lk)("div",de,[t[14]||(t[14]=(0,a.Lk)("h2",null,"Set Up Your Budget",-1)),t[15]||(t[15]=(0,a.Lk)("p",{class:"subtitle"},"Let's create a plan that works for you",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"setup-form"},[(0,a.Lk)("div",ue,[t[6]||(t[6]=(0,a.Lk)("label",{for:"income"},"Monthly Income",-1)),(0,a.Lk)("div",ce,[t[5]||(t[5]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"income","onUpdate:modelValue":t[0]||(t[0]=e=>i.income=e),required:"",min:"0",step:"0.01",placeholder:"Enter your monthly income"},null,512),[[s.Jo,i.income]])])]),(0,a.Lk)("div",pe,[t[8]||(t[8]=(0,a.Lk)("label",{for:"savings"},"Desired Monthly Savings",-1)),(0,a.Lk)("div",me,[t[7]||(t[7]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"savings","onUpdate:modelValue":t[1]||(t[1]=e=>i.savings=e),required:"",min:"0",step:"0.01",placeholder:"Enter desired savings"},null,512),[[s.Jo,i.savings]])])]),(0,a.Lk)("div",ge,[t[11]||(t[11]=(0,a.Lk)("h3",null,"Category Allocation",-1)),(0,a.Lk)("div",he,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.categories,((e,r)=>((0,a.uX)(),(0,a.CE)("div",{key:r,class:"category-item"},[(0,a.Lk)("div",ke,[(0,a.Lk)("span",ye,(0,o.v_)(r),1),"Other"!==r?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"remove-category",onClick:e=>l.removeCategory(r)}," √ó ",8,fe)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ve,[t[9]||(t[9]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e=>i.categories[r]=e,required:"",min:"0",step:"0.01",placeholder:"Enter amount"},null,8,be),[[s.Jo,i.categories[r]]])])])))),128))]),l.canAddCategory?((0,a.uX)(),(0,a.CE)("div",we,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.newCategory=e),class:"category-select"},[t[10]||(t[10]=(0,a.Lk)("option",{value:"",disabled:""},"Select a category",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.availableCategories,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,o.v_)(e),9,Le)))),128))],512),[[s.u1,i.newCategory]]),(0,a.Lk)("button",{type:"button",class:"btn-secondary",onClick:t[3]||(t[3]=(...e)=>l.addCategory&&l.addCategory(...e)),disabled:!i.newCategory}," Add Category ",8,Ee)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ce,[(0,a.Lk)("div",_e,[t[12]||(t[12]=(0,a.Lk)("span",null,"Total Allocated:",-1)),(0,a.Lk)("span",null,"$"+(0,o.v_)(l.totalAllocated.toFixed(2)),1)]),(0,a.Lk)("div",Pe,[t[13]||(t[13]=(0,a.Lk)("span",null,"Remaining Budget:",-1)),(0,a.Lk)("span",null,"$"+(0,o.v_)(l.remainingBudget.toFixed(2)),1)])]),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||!l.isValid},(0,o.v_)(i.loading?"Setting Up...":"Complete Setup"),9,Se),i.error?((0,a.uX)(),(0,a.CE)("div",Ae,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32)])])}var De={name:"SetupPage",data(){return{income:"",savings:"",categories:{Rent:0,Food:0,Transport:0,Utilities:0,Other:0},availableCategories:["Entertainment","Shopping","Healthcare","Education","Travel"],newCategory:"",loading:!1,error:null}},computed:{totalAllocated(){return Object.values(this.categories).reduce(((e,t)=>e+Number(t)),0)},remainingBudget(){return this.income-this.savings-this.totalAllocated},isValid(){return this.income>0&&this.savings>=0&&this.remainingBudget>=0&&Object.values(this.categories).every((e=>e>=0))},canAddCategory(){return Object.keys(this.categories).length<10}},methods:{addCategory(){this.newCategory&&!this.categories[this.newCategory]&&(this.categories[this.newCategory]=0,this.newCategory="")},removeCategory(e){this.$delete(this.categories,e)},async handleSubmit(){if(this.totalAllocated+this.savings>this.income)this.error="Total allocation exceeds income";else{this.loading=!0,this.error=null;try{const e=localStorage.getItem("token"),t=await S.post("/budget/setup",{income:this.income,savings_goal:this.savings,categories:this.categories,username:e});"Budget setup successful"===t.data.message&&this.$router.push("/dashboard")}catch(e){e.response?this.error=e.response.data.detail||"Failed to setup budget":this.error="Network error. Please try again."}finally{this.loading=!1}}}}};const $e=(0,p.A)(De,[["render",xe],["__scopeId","data-v-16bf6cca"]]);var Ie=$e;const Ue={class:"dashboard"},Xe={class:"header"},Be={class:"menu-container"},Fe={key:0,class:"dropdown-menu"},qe={class:"header-content"},Ve={class:"greeting"},Ne={class:"date-display"},Oe={class:"content"},Je={class:"budget-overview"},Qe={class:"budget-card"},je={class:"budget-amount"},Me={class:"budget-details"},Te={class:"detail-item"},Re={class:"detail-item"},We={class:"expense-card"},ze={class:"form-group"},Ke=["value"],He={class:"form-group"},Ye={class:"input-with-symbol"},Ge={class:"form-group"},Ze=["disabled"],et={key:0,class:"error-message"},tt={class:"expense-distribution"},rt={class:"chart-container"},st=["src"],at={key:1,class:"no-data-message"},ot={class:"category-list"},nt={class:"category-info"},it={class:"category-name"},lt={class:"category-amount"},dt={class:"progress-bar"},ut={class:"expense-history"},ct={class:"expense-controls"},pt={class:"control-group"},mt=["value"],gt={class:"control-group"},ht={class:"control-group"},kt={key:0,class:"expense-list"},yt={class:"expense-info"},ft={class:"expense-category"},vt={class:"expense-amount"},bt={class:"expense-description"},wt={class:"expense-date"},Lt=["onClick","disabled"],Et={key:1,class:"no-expenses"};function Ct(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Ue,[(0,a.Lk)("div",Xe,[(0,a.Lk)("div",Be,[(0,a.Lk)("button",{class:"menu-button",onClick:t[0]||(t[0]=(...e)=>l.toggleMenu&&l.toggleMenu(...e))},t[9]||(t[9]=[(0,a.Lk)("span",{class:"menu-icon"},"‚ò∞",-1)])),i.showMenu?((0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.bF)(d,{to:"/profile",class:"menu-item"},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.Lk)("span",{class:"menu-icon"},"üë§",-1),(0,a.eW)(" Profile ")]))),_:1}),(0,a.bF)(d,{to:"/edit-budget",class:"menu-item"},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.Lk)("span",{class:"menu-icon"},"üí∞",-1),(0,a.eW)(" Change Budget Distribution ")]))),_:1}),(0,a.Lk)("button",{class:"menu-item",onClick:t[1]||(t[1]=(...e)=>l.logout&&l.logout(...e))},t[12]||(t[12]=[(0,a.Lk)("span",{class:"menu-icon"},"üö™",-1),(0,a.eW)(" Logout ")]))])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",qe,[(0,a.Lk)("div",Ve,[(0,a.Lk)("h1",null,"Welcome back, "+(0,o.v_)(i.userInfo.first_name)+"!",1),t[13]||(t[13]=(0,a.Lk)("p",{class:"subtitle"},"Here's your financial overview for today",-1))]),(0,a.Lk)("div",Ne,(0,o.v_)(i.currentDate),1)])]),(0,a.Lk)("div",Oe,[(0,a.Lk)("div",Je,[(0,a.Lk)("div",Qe,[t[16]||(t[16]=(0,a.Lk)("h3",null,"Monthly Budget",-1)),(0,a.Lk)("div",je," $"+(0,o.v_)(i.budgetSummary.income.toFixed(2)),1),(0,a.Lk)("div",Me,[(0,a.Lk)("div",Te,[t[14]||(t[14]=(0,a.Lk)("span",null,"Savings Goal",-1)),(0,a.Lk)("span",null,"$"+(0,o.v_)(i.budgetSummary.savings_goal.toFixed(2)),1)]),(0,a.Lk)("div",Re,[t[15]||(t[15]=(0,a.Lk)("span",null,"Remaining",-1)),(0,a.Lk)("span",null,"$"+(0,o.v_)(i.budgetSummary.remaining.toFixed(2)),1)])])]),(0,a.Lk)("div",We,[t[22]||(t[22]=(0,a.Lk)("h3",null,"Add Expense",-1)),(0,a.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>l.addExpense&&l.addExpense(...e)),["prevent"])),class:"expense-form"},[(0,a.Lk)("div",ze,[t[18]||(t[18]=(0,a.Lk)("label",{for:"category"},"Category",-1)),(0,a.bo)((0,a.Lk)("select",{id:"category","onUpdate:modelValue":t[2]||(t[2]=e=>i.newExpense.category=e),required:""},[t[17]||(t[17]=(0,a.Lk)("option",{value:"",disabled:""},"Select a category",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Object.keys(i.budgetSummary.categories),(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,o.v_)(e),9,Ke)))),128))],512),[[s.u1,i.newExpense.category]])]),(0,a.Lk)("div",He,[t[20]||(t[20]=(0,a.Lk)("label",{for:"amount"},"Amount",-1)),(0,a.Lk)("div",Ye,[t[19]||(t[19]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":t[3]||(t[3]=e=>i.newExpense.amount=e),required:"",min:"0",step:"0.01",placeholder:"Enter amount"},null,512),[[s.Jo,i.newExpense.amount]])])]),(0,a.Lk)("div",Ge,[t[21]||(t[21]=(0,a.Lk)("label",{for:"description"},"Description",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"description","onUpdate:modelValue":t[4]||(t[4]=e=>i.newExpense.description=e),placeholder:"Add a note (optional)"},null,512),[[s.Jo,i.newExpense.description]])]),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading},(0,o.v_)(i.loading?"Adding...":"Add Expense"),9,Ze),i.error?((0,a.uX)(),(0,a.CE)("div",et,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32)])]),(0,a.Lk)("div",tt,[t[23]||(t[23]=(0,a.Lk)("h3",null,"Expense Distribution",-1)),(0,a.Lk)("div",rt,[i.chartImage?((0,a.uX)(),(0,a.CE)("img",{key:0,src:"data:image/png;base64,"+i.chartImage,alt:"Expense Distribution Chart",class:"chart-image"},null,8,st)):((0,a.uX)(),(0,a.CE)("div",at,"No budget data available"))]),(0,a.Lk)("div",ot,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.budgetSummary.expenses,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"category-item"},[(0,a.Lk)("div",nt,[(0,a.Lk)("span",it,(0,o.v_)(t),1),(0,a.Lk)("span",lt,"$"+(0,o.v_)(e.toFixed(2)),1)]),(0,a.Lk)("div",dt,[(0,a.Lk)("div",{class:"progress",style:(0,o.Tr)({width:l.getProgressPercentage(t)+"%"})},null,4)])])))),128))])]),(0,a.Lk)("div",ut,[t[29]||(t[29]=(0,a.Lk)("h3",null,"Expense History",-1)),(0,a.Lk)("div",ct,[(0,a.Lk)("div",pt,[t[25]||(t[25]=(0,a.Lk)("label",{for:"category-filter"},"Filter by Category:",-1)),(0,a.bo)((0,a.Lk)("select",{id:"category-filter","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedCategory=e)},[t[24]||(t[24]=(0,a.Lk)("option",{value:""},"All Categories",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Object.keys(i.budgetSummary.categories),(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,o.v_)(e),9,mt)))),128))],512),[[s.u1,i.selectedCategory]])]),(0,a.Lk)("div",gt,[t[26]||(t[26]=(0,a.Lk)("label",{for:"search"},"Search:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"search","onUpdate:modelValue":t[7]||(t[7]=e=>i.searchQuery=e),placeholder:"Search by description..."},null,512),[[s.Jo,i.searchQuery]])]),(0,a.Lk)("div",ht,[t[28]||(t[28]=(0,a.Lk)("label",{for:"sort"},"Sort by:",-1)),(0,a.bo)((0,a.Lk)("select",{id:"sort","onUpdate:modelValue":t[8]||(t[8]=e=>i.sortBy=e)},t[27]||(t[27]=[(0,a.Fv)('<option value="date-desc">Date (Newest First)</option><option value="date-asc">Date (Oldest First)</option><option value="amount-desc">Amount (High to Low)</option><option value="amount-asc">Amount (Low to High)</option><option value="category">Category (A-Z)</option>',5)]),512),[[s.u1,i.sortBy]])])]),l.filteredExpenses.length>0?((0,a.uX)(),(0,a.CE)("div",kt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredExpenses,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"expense-item"},[(0,a.Lk)("div",yt,[(0,a.Lk)("span",ft,(0,o.v_)(e.category),1),(0,a.Lk)("span",vt,"$"+(0,o.v_)(e.amount_spent.toFixed(2)),1),(0,a.Lk)("span",bt,(0,o.v_)(e.description),1),(0,a.Lk)("span",wt,(0,o.v_)(l.formatDate(e.created_at)),1)]),(0,a.Lk)("button",{class:"delete-btn",onClick:t=>l.deleteExpense(e.id),disabled:i.loading}," Delete ",8,Lt)])))),128))])):((0,a.uX)(),(0,a.CE)("div",Et,"No expenses found."))])])])}var _t={name:"MainPage",data(){return{budgetSummary:{income:0,savings_goal:0,categories:{},expenses:{},remaining:0},userInfo:{first_name:"",last_name:"",username:"",email:""},currentDate:"",chartImage:null,newExpense:{category:"",amount:"",description:""},loading:!1,error:null,showMenu:!1,expenses:[],selectedCategory:"",searchQuery:"",sortBy:"date-desc"}},computed:{filteredCategories(){return Object.fromEntries(Object.entries(this.budgetSummary.categories).filter((([e,t])=>t>0)))},filteredExpenses(){let e=[...this.expenses];if(this.selectedCategory&&(e=e.filter((e=>e.category===this.selectedCategory))),this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.description.toLowerCase().includes(t)))}switch(this.sortBy){case"date-desc":e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at)));break;case"date-asc":e.sort(((e,t)=>new Date(e.created_at)-new Date(t.created_at)));break;case"amount-desc":e.sort(((e,t)=>t.amount_spent-e.amount_spent));break;case"amount-asc":e.sort(((e,t)=>e.amount_spent-t.amount_spent));break;case"category":e.sort(((e,t)=>e.category.localeCompare(t.category)));break}return e}},async created(){await this.fetchUserInfo(),await this.fetchBudgetSummary(),await this.fetchChart(),await this.fetchExpenses(),this.updateCurrentDate()},mounted(){document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{handleClickOutside(e){const t=this.$el.querySelector(".menu-container");t&&!t.contains(e.target)&&(this.showMenu=!1)},toggleMenu(){this.showMenu=!this.showMenu},logout(){localStorage.removeItem("token"),this.$emit("authenticated",!1),this.$router.push("/login")},async fetchBudgetSummary(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/budget/summary",{headers:{Authorization:`Bearer ${e}`}});this.budgetSummary=t.data}catch(e){console.error("Error fetching budget summary:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchChart(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/budget/chart",{headers:{Authorization:`Bearer ${e}`}});this.chartImage=t.data.image}catch(e){console.error("Error fetching chart:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchExpenses(){try{const e=await S.get("/budget/expenses");this.expenses=e.data}catch(e){console.error("Error fetching expenses:",e)}},async addExpense(){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");await S.post("/budget/expense",this.newExpense,{headers:{Authorization:`Bearer ${e}`}});await this.fetchBudgetSummary(),await this.fetchChart(),await this.fetchExpenses(),this.newExpense={category:"",amount:"",description:""}}catch(e){console.error("Error adding expense:",e),this.error=e.response?.data?.detail||"Failed to add expense"}finally{this.loading=!1}},getProgressPercentage(e){const t=this.budgetSummary.categories[e]||0,r=this.budgetSummary.expenses[e]||0;return r/t*100},async deleteExpense(e){if(confirm("Are you sure you want to delete this expense?")){this.loading=!0;try{await S.delete(`/budget/expense/${e}`),this.expenses=this.expenses.filter((t=>t.id!==e)),await this.fetchBudgetSummary(),await this.fetchChart()}catch(t){console.error("Error deleting expense:",t),alert("Failed to delete expense. Please try again.")}finally{this.loading=!1}}},formatDate(e){const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},async fetchUserInfo(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/auth/me",{headers:{Authorization:`Bearer ${e}`}});this.userInfo=t.data}catch(e){console.error("Error fetching user info:",e),401===e.response?.status&&this.$router.push("/login")}},updateCurrentDate(){const e=new Date;this.currentDate=e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}};const Pt=(0,p.A)(_t,[["render",Ct]]);var St=Pt;const At={class:"profile"},xt={class:"header"},Dt={class:"header-content"},$t={class:"profile-content"},It={class:"user-info"},Ut={key:0,class:"loading"},Xt={key:1,class:"error"},Bt={key:2,class:"info-grid"},Ft={class:"info-item"},qt={class:"info-item"},Vt={class:"info-item"},Nt={class:"info-item"},Ot={class:"password-change"},Jt={class:"form-group"},Qt={class:"form-group"},jt={class:"form-group"},Mt={key:0,class:"error"},Tt=["disabled"],Rt={class:"delete-account"},Wt={class:"form-group"},zt={class:"form-group"},Kt={key:0,class:"error"},Ht=["disabled"];function Yt(e,t,r,n,i,l){return(0,a.uX)(),(0,a.CE)("div",At,[(0,a.Lk)("div",xt,[(0,a.Lk)("div",Dt,[(0,a.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e))},t[8]||(t[8]=[(0,a.Lk)("span",{class:"back-icon"},"‚Üê",-1),(0,a.eW)(" Back to Dashboard ")])),t[9]||(t[9]=(0,a.Lk)("h1",null,"Profile Settings",-1))])]),(0,a.Lk)("div",$t,[(0,a.Lk)("div",It,[t[14]||(t[14]=(0,a.Lk)("h2",null,"User Information",-1)),i.loading?((0,a.uX)(),(0,a.CE)("div",Ut,"Loading...")):i.error?((0,a.uX)(),(0,a.CE)("div",Xt,(0,o.v_)(i.error),1)):((0,a.uX)(),(0,a.CE)("div",Bt,[(0,a.Lk)("div",Ft,[t[10]||(t[10]=(0,a.Lk)("label",null,"First Name:",-1)),(0,a.Lk)("span",null,(0,o.v_)(i.userInfo.first_name),1)]),(0,a.Lk)("div",qt,[t[11]||(t[11]=(0,a.Lk)("label",null,"Last Name:",-1)),(0,a.Lk)("span",null,(0,o.v_)(i.userInfo.last_name),1)]),(0,a.Lk)("div",Vt,[t[12]||(t[12]=(0,a.Lk)("label",null,"Username:",-1)),(0,a.Lk)("span",null,(0,o.v_)(i.userInfo.username),1)]),(0,a.Lk)("div",Nt,[t[13]||(t[13]=(0,a.Lk)("label",null,"Email:",-1)),(0,a.Lk)("span",null,(0,o.v_)(i.userInfo.email),1)])]))]),(0,a.Lk)("div",Ot,[t[18]||(t[18]=(0,a.Lk)("h2",null,"Change Password",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>l.changePassword&&l.changePassword(...e)),["prevent"])),class:"password-form"},[(0,a.Lk)("div",Jt,[t[15]||(t[15]=(0,a.Lk)("label",{for:"currentPassword"},"Current Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"currentPassword","onUpdate:modelValue":t[1]||(t[1]=e=>i.passwordData.current_password=e),required:""},null,512),[[s.Jo,i.passwordData.current_password]])]),(0,a.Lk)("div",Qt,[t[16]||(t[16]=(0,a.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[2]||(t[2]=e=>i.passwordData.new_password=e),required:"",minlength:"8"},null,512),[[s.Jo,i.passwordData.new_password]])]),(0,a.Lk)("div",jt,[t[17]||(t[17]=(0,a.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>i.passwordData.confirm_password=e),required:"",minlength:"8"},null,512),[[s.Jo,i.passwordData.confirm_password]])]),i.passwordError?((0,a.uX)(),(0,a.CE)("div",Mt,(0,o.v_)(i.passwordError),1)):(0,a.Q3)("",!0),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.passwordLoading},(0,o.v_)(i.passwordLoading?"Changing...":"Change Password"),9,Tt)],32)]),(0,a.Lk)("div",Rt,[t[21]||(t[21]=(0,a.Lk)("h2",null,"Delete Account",-1)),t[22]||(t[22]=(0,a.Lk)("p",{class:"warning"}," Warning: This action cannot be undone. All your data will be permanently deleted. ",-1)),(0,a.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>l.confirmDelete&&l.confirmDelete(...e)),["prevent"])),class:"delete-form"},[(0,a.Lk)("div",Wt,[t[19]||(t[19]=(0,a.Lk)("label",{for:"deleteUsername"},"Username",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"deleteUsername","onUpdate:modelValue":t[5]||(t[5]=e=>i.deleteData.username=e),required:"",placeholder:"Enter your username"},null,512),[[s.Jo,i.deleteData.username]])]),(0,a.Lk)("div",zt,[t[20]||(t[20]=(0,a.Lk)("label",{for:"deletePassword"},"Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"deletePassword","onUpdate:modelValue":t[6]||(t[6]=e=>i.deleteData.password=e),required:"",placeholder:"Enter your password"},null,512),[[s.Jo,i.deleteData.password]])]),i.deleteError?((0,a.uX)(),(0,a.CE)("div",Kt,(0,o.v_)(i.deleteError),1)):(0,a.Q3)("",!0),(0,a.Lk)("button",{type:"submit",class:"btn-danger",disabled:i.deleteLoading},(0,o.v_)(i.deleteLoading?"Deleting...":"Delete Account"),9,Ht)],32)])])])}var Gt={name:"Profile",data(){return{userInfo:{first_name:"",last_name:"",username:"",email:""},passwordData:{current_password:"",new_password:"",confirm_password:""},loading:!1,error:null,passwordLoading:!1,passwordError:null,deleteData:{username:"",password:""},deleteLoading:!1,deleteError:null}},async created(){await this.fetchUserInfo()},methods:{async fetchUserInfo(){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/profile/info",{headers:{Authorization:`Bearer ${e}`}});this.userInfo=t.data}catch(e){console.error("Error fetching user info:",e),this.error=e.response?.data?.detail||"Failed to load user information",401===e.response?.status&&this.$router.push("/login")}finally{this.loading=!1}},async changePassword(){if(this.passwordData.new_password===this.passwordData.confirm_password){this.passwordLoading=!0,this.passwordError=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");await S.post("/profile/change-password",{current_password:this.passwordData.current_password,new_password:this.passwordData.new_password},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});this.passwordData={current_password:"",new_password:"",confirm_password:""},this.passwordError="Password changed successfully!"}catch(e){console.error("Error changing password:",e),e.response?.data?.detail?Array.isArray(e.response.data.detail)?this.passwordError=e.response.data.detail.join(", "):this.passwordError=e.response.data.detail:this.passwordError="Failed to change password"}finally{this.passwordLoading=!1}}else this.passwordError="New passwords do not match"},async confirmDelete(){if(this.deleteData.username===this.userInfo.username){if(confirm("Are you sure you want to delete your account? This action cannot be undone.")){this.deleteLoading=!0,this.deleteError=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.delete("/auth/delete-account",{data:{username:this.deleteData.username,password:this.deleteData.password},headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});"Account deleted successfully"===t.data.message&&(localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("budgetData"),localStorage.removeItem("expenses"),this.$store&&this.$store.commit("clearUserData"),this.$router.push("/login"))}catch(e){console.error("Error deleting account:",e),e.response?.data?.detail?this.deleteError=e.response.data.detail:this.deleteError="Failed to delete account"}finally{this.deleteLoading=!1}}}else this.deleteError="Username does not match"},goBack(){this.$router.push("/dashboard")}}};const Zt=(0,p.A)(Gt,[["render",Yt],["__scopeId","data-v-e8f75632"]]);var er=Zt;const tr={class:"reset-password-container"},rr={class:"reset-password-card"},sr={class:"form-group"},ar={key:0,class:"error"},or={class:"form-group"},nr={key:0,class:"error"},ir=["disabled"],lr={key:0,class:"error-message"},dr={class:"back-to-login"};function ur(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",tr,[(0,a.Lk)("div",rr,[t[8]||(t[8]=(0,a.Lk)("h2",null,"Reset Your Password",-1)),t[9]||(t[9]=(0,a.Lk)("p",{class:"subtitle"},"Enter your new password",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"reset-password-form"},[(0,a.Lk)("div",sr,[t[5]||(t[5]=(0,a.Lk)("label",{for:"newPassword"},"New Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[0]||(t[0]=e=>i.newPassword=e),required:"",minlength:"8",placeholder:"Enter new password",onInput:t[1]||(t[1]=(...e)=>l.validatePassword&&l.validatePassword(...e))},null,544),[[s.Jo,i.newPassword]]),i.passwordError?((0,a.uX)(),(0,a.CE)("span",ar,(0,o.v_)(i.passwordError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",or,[t[6]||(t[6]=(0,a.Lk)("label",{for:"confirmPassword"},"Confirm New Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),required:"",minlength:"8",placeholder:"Confirm new password",onInput:t[3]||(t[3]=(...e)=>l.validatePassword&&l.validatePassword(...e))},null,544),[[s.Jo,i.confirmPassword]]),i.confirmError?((0,a.uX)(),(0,a.CE)("span",nr,(0,o.v_)(i.confirmError),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{type:"submit",class:"btn-primary",disabled:i.loading||i.passwordError||i.confirmError},(0,o.v_)(i.loading?"Resetting...":"Reset Password"),9,ir),i.error?((0,a.uX)(),(0,a.CE)("div",lr,(0,o.v_)(i.error),1)):(0,a.Q3)("",!0)],32),(0,a.Lk)("div",dr,[(0,a.bF)(d,{to:"/login",class:"btn-link"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)(" ‚Üê Back to Login ")]))),_:1})])])])}var cr={name:"ResetPassword",data(){return{newPassword:"",confirmPassword:"",loading:!1,error:null,passwordError:null,confirmError:null}},methods:{validatePassword(){return this.passwordError=null,this.confirmError=null,this.newPassword.length<8?(this.passwordError="Password must be at least 8 characters long",!1):this.newPassword===this.confirmPassword||(this.confirmError="Passwords do not match",!1)},async handleSubmit(){if(this.validatePassword()){this.loading=!0,this.error=null;try{console.log("Sending reset password request");const e=await S.post("/auth/reset-password",{token:this.$route.query.email,new_password:this.newPassword});console.log("Response received:",e.data),"Password updated successfully"===e.data.message&&this.$router.push("/login")}catch(e){if(console.error("Error details:",e.response?.data),422===e.response?.status){const t=e.response.data.detail;Array.isArray(t)?this.error=t[0].msg:this.error="Invalid password format"}else 400===e.response?.status?this.error="Invalid reset token":this.error="An error occurred. Please try again."}finally{this.loading=!1}}}}};const pr=(0,p.A)(cr,[["render",ur],["__scopeId","data-v-7fa673d4"]]);var mr=pr;const gr={class:"edit-budget"},hr={class:"header"},kr={class:"budget-form"},yr={class:"form-group"},fr={class:"input-with-symbol"},vr={class:"form-group"},br={class:"input-with-symbol"},wr={class:"categories"},Lr={class:"category-list"},Er={class:"category-header"},Cr=["onUpdate:modelValue"],_r={class:"input-with-symbol"},Pr=["onUpdate:modelValue"],Sr={key:0,class:"error-message"},Ar={class:"form-actions"},xr=["disabled"];function Dr(e,t,r,n,i,l){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",gr,[(0,a.Lk)("div",hr,[t[5]||(t[5]=(0,a.Lk)("h1",null,"Edit Budget Distribution",-1)),(0,a.bF)(d,{to:"/dashboard",class:"back-button"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("‚Üê Back to Dashboard")]))),_:1})]),(0,a.Lk)("div",kr,[(0,a.Lk)("div",yr,[t[7]||(t[7]=(0,a.Lk)("label",{for:"income"},"Monthly Income",-1)),(0,a.Lk)("div",fr,[t[6]||(t[6]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"income","onUpdate:modelValue":t[0]||(t[0]=e=>i.income=e),required:"",min:"0",step:"0.01",placeholder:"Enter monthly income"},null,512),[[s.Jo,i.income]])])]),(0,a.Lk)("div",vr,[t[9]||(t[9]=(0,a.Lk)("label",{for:"savings"},"Savings Goal (%)",-1)),(0,a.Lk)("div",br,[(0,a.bo)((0,a.Lk)("input",{type:"number",id:"savings","onUpdate:modelValue":t[1]||(t[1]=e=>i.savingsPercentage=e),required:"",min:"0",max:"100",step:"1",placeholder:"Enter savings percentage"},null,512),[[s.Jo,i.savingsPercentage]]),t[8]||(t[8]=(0,a.Lk)("span",{class:"symbol"},"%",-1))])]),(0,a.Lk)("div",wr,[t[11]||(t[11]=(0,a.Lk)("h3",null,"Category Distribution",-1)),(0,a.Lk)("div",Lr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.categories,((e,r)=>((0,a.uX)(),(0,a.CE)("div",{key:r,class:"category-item"},[(0,a.Lk)("div",Er,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t,placeholder:"Category name",required:""},null,8,Cr),[[s.Jo,e.name]]),(0,a.Lk)("div",_r,[t[10]||(t[10]=(0,a.Lk)("span",{class:"symbol"},"$",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.amount=t,required:"",min:"0",step:"0.01",placeholder:"Amount",class:(0,o.C4)({"error-input":l.hasCategoryError(e.name)})},null,10,Pr),[[s.Jo,e.amount]])])]),l.hasCategoryError(e.name)?((0,a.uX)(),(0,a.CE)("div",Sr," Cannot reduce budget below current spending of $"+(0,o.v_)(l.getCategorySpending(e.name).toFixed(2)),1)):(0,a.Q3)("",!0)])))),128))]),(0,a.Lk)("button",{class:"add-category",onClick:t[2]||(t[2]=(...e)=>l.addCategory&&l.addCategory(...e))}," + Add Category ")]),(0,a.Lk)("div",Ar,[(0,a.Lk)("button",{class:"btn-primary",onClick:t[3]||(t[3]=(...e)=>l.updateBudget&&l.updateBudget(...e)),disabled:i.loading||l.hasErrors},(0,o.v_)(i.loading?"Updating...":"Update Budget"),9,xr)])])])}var $r={name:"EditBudget",data(){return{income:0,savingsPercentage:0,categories:[],currentSpending:{},loading:!1,error:null}},computed:{hasErrors(){return this.categories.some((e=>this.hasCategoryError(e.name)))}},async created(){await this.fetchCurrentBudget(),await this.fetchCurrentSpending()},methods:{async fetchCurrentBudget(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/budget/summary",{headers:{Authorization:`Bearer ${e}`}});this.income=t.data.income,this.savingsPercentage=t.data.savings_goal/t.data.income*100,this.categories=Object.entries(t.data.categories).map((([e,t])=>({name:e,amount:t})))}catch(e){console.error("Error fetching budget:",e),401===e.response?.status&&this.$router.push("/login")}},async fetchCurrentSpending(){try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=await S.get("/budget/expenses",{headers:{Authorization:`Bearer ${e}`}});this.currentSpending=t.data.reduce(((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount_spent,e)),{})}catch(e){console.error("Error fetching expenses:",e)}},addCategory(){this.categories.push({name:"",amount:0})},hasCategoryError(e){const t=this.getCategorySpending(e),r=this.categories.find((t=>t.name===e));return r&&r.amount<t},getCategorySpending(e){return this.currentSpending[e]||0},async updateBudget(){if(!this.hasErrors){this.loading=!0,this.error=null;try{const e=localStorage.getItem("token");if(!e)return void this.$router.push("/login");const t=this.income*this.savingsPercentage/100,r=this.categories.reduce(((e,t)=>(e[t.name]=t.amount,e)),{});await S.post("/budget/update",{income:this.income,savings_goal:t,categories:r},{headers:{Authorization:`Bearer ${e}`}}),this.$router.push("/dashboard")}catch(e){console.error("Error updating budget:",e),this.error=e.response?.data?.detail||"Failed to update budget"}finally{this.loading=!1}}}}};const Ir=(0,p.A)($r,[["render",Dr],["__scopeId","data-v-6e3321af"]]);var Ur=Ir;const Xr=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:D},{path:"/create-account",name:"CreateAccount",component:K},{path:"/forgot-password",name:"ForgotPassword",component:ie},{path:"/reset-password",name:"ResetPassword",component:mr},{path:"/setup",name:"Setup",component:Ie,meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:St,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:er,meta:{requiresAuth:!0}},{path:"/edit-budget",name:"EditBudget",component:Ur,meta:{requiresAuth:!0}}],Br=(0,h.aE)({history:(0,h.LA)(),routes:Xr});Br.beforeEach(((e,t,r)=>{const s=e.matched.some((e=>e.meta.requiresAuth)),a=localStorage.getItem("token");s&&!a?r("/login"):r()}));var Fr=Br;_.A.defaults.baseURL="http://localhost:8000",_.A.defaults.headers.common["Content-Type"]="application/json",_.A.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),_.A.interceptors.response.use((e=>e),(e=>(e.response?(console.error("Error response:",e.response.data),401===e.response.status&&(localStorage.removeItem("token"),Fr.push("/login"))):e.request?console.error("Error request:",e.request):console.error("Error message:",e.message),Promise.reject(e))));const qr=(0,s.Ef)(g);qr.use(Fr),qr.mount("#app")}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],o=e[u][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],i=s[1],l=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(l)var u=l(r)}for(t&&t(s);d<n.length;d++)o=n[d],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},s=self["webpackChunkbudget_buddy_frontend"]=self["webpackChunkbudget_buddy_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[504],(function(){return r(124)}));s=r.O(s)})();
//# sourceMappingURL=app.4093f6e7.js.map