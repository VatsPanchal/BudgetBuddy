{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"SetupPage\",\n  data() {\n    return {\n      income: \"\",\n      savings: \"\",\n      categories: {\n        Rent: 0,\n        Food: 0,\n        Transport: 0,\n        Utilities: 0,\n        Other: 0\n      },\n      availableCategories: [\"Entertainment\", \"Shopping\", \"Healthcare\", \"Education\", \"Travel\"],\n      newCategory: \"\",\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    totalAllocated() {\n      return Object.values(this.categories).reduce((sum, amount) => sum + Number(amount), 0);\n    },\n    remainingBudget() {\n      return this.income - this.savings - this.totalAllocated;\n    },\n    isValid() {\n      return this.income > 0 && this.savings >= 0 && this.remainingBudget >= 0 && Object.values(this.categories).every(amount => amount >= 0);\n    },\n    canAddCategory() {\n      return Object.keys(this.categories).length < 10;\n    }\n  },\n  methods: {\n    addCategory() {\n      if (this.newCategory && !this.categories[this.newCategory]) {\n        this.categories[this.newCategory] = 0;\n        this.newCategory = \"\";\n      }\n    },\n    removeCategory(category) {\n      this.$delete(this.categories, category);\n    },\n    async handleSubmit() {\n      if (this.totalAllocated + this.savings > this.income) {\n        this.error = \"Total allocation exceeds income\";\n        return;\n      }\n      this.loading = true;\n      this.error = null;\n      try {\n        const token = localStorage.getItem(\"token\");\n        const response = await axios.post(\"/api/budget/setup\", {\n          income: this.income,\n          savings_goal: this.savings,\n          categories: this.categories,\n          username: token // Using token as username since that's what we stored\n        });\n        if (response.data.message === \"Budget setup successful\") {\n          this.$router.push(\"/dashboard\");\n        }\n      } catch (error) {\n        if (error.response) {\n          this.error = error.response.data.detail || \"Failed to setup budget\";\n        } else {\n          this.error = \"Network error. Please try again.\";\n        }\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","income","savings","categories","Rent","Food","Transport","Utilities","Other","availableCategories","newCategory","loading","error","computed","totalAllocated","Object","values","reduce","sum","amount","Number","remainingBudget","isValid","every","canAddCategory","keys","length","methods","addCategory","removeCategory","category","$delete","handleSubmit","token","localStorage","getItem","response","post","savings_goal","username","message","$router","push","detail"],"sources":["C:\\Users\\nikha\\OneDrive\\Documents\\CS122 Final Project\\project\\budget-buddy\\frontend\\src\\components\\SetupPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"setup-container\">\r\n    <div class=\"setup-card\">\r\n      <h2>Set Up Your Budget</h2>\r\n      <p class=\"subtitle\">Let's create a plan that works for you</p>\r\n\r\n      <form @submit.prevent=\"handleSubmit\" class=\"setup-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"income\">Monthly Income</label>\r\n          <div class=\"input-with-symbol\">\r\n            <span class=\"symbol\">$</span>\r\n            <input\r\n              type=\"number\"\r\n              id=\"income\"\r\n              v-model=\"income\"\r\n              required\r\n              min=\"0\"\r\n              step=\"0.01\"\r\n              placeholder=\"Enter your monthly income\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"savings\">Desired Monthly Savings</label>\r\n          <div class=\"input-with-symbol\">\r\n            <span class=\"symbol\">$</span>\r\n            <input\r\n              type=\"number\"\r\n              id=\"savings\"\r\n              v-model=\"savings\"\r\n              required\r\n              min=\"0\"\r\n              step=\"0.01\"\r\n              placeholder=\"Enter desired savings\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"categories-section\">\r\n          <h3>Category Allocation</h3>\r\n          <div class=\"category-list\">\r\n            <div\r\n              v-for=\"(amount, category) in categories\"\r\n              :key=\"category\"\r\n              class=\"category-item\"\r\n            >\r\n              <div class=\"category-header\">\r\n                <span class=\"category-name\">{{ category }}</span>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"remove-category\"\r\n                  @click=\"removeCategory(category)\"\r\n                  v-if=\"category !== 'Other'\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n              <div class=\"input-with-symbol\">\r\n                <span class=\"symbol\">$</span>\r\n                <input\r\n                  type=\"number\"\r\n                  v-model=\"categories[category]\"\r\n                  required\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Enter amount\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"add-category\" v-if=\"canAddCategory\">\r\n            <select v-model=\"newCategory\" class=\"category-select\">\r\n              <option value=\"\" disabled>Select a category</option>\r\n              <option\r\n                v-for=\"cat in availableCategories\"\r\n                :key=\"cat\"\r\n                :value=\"cat\"\r\n              >\r\n                {{ cat }}\r\n              </option>\r\n            </select>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-secondary\"\r\n              @click=\"addCategory\"\r\n              :disabled=\"!newCategory\"\r\n            >\r\n              Add Category\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"budget-summary\">\r\n          <div class=\"summary-item\">\r\n            <span>Total Allocated:</span>\r\n            <span>${{ totalAllocated.toFixed(2) }}</span>\r\n          </div>\r\n          <div class=\"summary-item\">\r\n            <span>Remaining Budget:</span>\r\n            <span>${{ remainingBudget.toFixed(2) }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          class=\"btn-primary\"\r\n          :disabled=\"loading || !isValid\"\r\n        >\r\n          {{ loading ? \"Setting Up...\" : \"Complete Setup\" }}\r\n        </button>\r\n\r\n        <div class=\"error-message\" v-if=\"error\">\r\n          {{ error }}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"SetupPage\",\r\n  data() {\r\n    return {\r\n      income: \"\",\r\n      savings: \"\",\r\n      categories: {\r\n        Rent: 0,\r\n        Food: 0,\r\n        Transport: 0,\r\n        Utilities: 0,\r\n        Other: 0,\r\n      },\r\n      availableCategories: [\r\n        \"Entertainment\",\r\n        \"Shopping\",\r\n        \"Healthcare\",\r\n        \"Education\",\r\n        \"Travel\",\r\n      ],\r\n      newCategory: \"\",\r\n      loading: false,\r\n      error: null,\r\n    };\r\n  },\r\n  computed: {\r\n    totalAllocated() {\r\n      return Object.values(this.categories).reduce(\r\n        (sum, amount) => sum + Number(amount),\r\n        0\r\n      );\r\n    },\r\n    remainingBudget() {\r\n      return this.income - this.savings - this.totalAllocated;\r\n    },\r\n    isValid() {\r\n      return (\r\n        this.income > 0 &&\r\n        this.savings >= 0 &&\r\n        this.remainingBudget >= 0 &&\r\n        Object.values(this.categories).every((amount) => amount >= 0)\r\n      );\r\n    },\r\n    canAddCategory() {\r\n      return Object.keys(this.categories).length < 10;\r\n    },\r\n  },\r\n  methods: {\r\n    addCategory() {\r\n      if (this.newCategory && !this.categories[this.newCategory]) {\r\n        this.categories[this.newCategory] = 0;\r\n        this.newCategory = \"\";\r\n      }\r\n    },\r\n    removeCategory(category) {\r\n      this.$delete(this.categories, category);\r\n    },\r\n    async handleSubmit() {\r\n      if (this.totalAllocated + this.savings > this.income) {\r\n        this.error = \"Total allocation exceeds income\";\r\n        return;\r\n      }\r\n\r\n      this.loading = true;\r\n      this.error = null;\r\n\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        const response = await axios.post(\"/api/budget/setup\", {\r\n          income: this.income,\r\n          savings_goal: this.savings,\r\n          categories: this.categories,\r\n          username: token, // Using token as username since that's what we stored\r\n        });\r\n\r\n        if (response.data.message === \"Budget setup successful\") {\r\n          this.$router.push(\"/dashboard\");\r\n        }\r\n      } catch (error) {\r\n        if (error.response) {\r\n          this.error = error.response.data.detail || \"Failed to setup budget\";\r\n        } else {\r\n          this.error = \"Network error. Please try again.\";\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.setup-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  padding: 1rem;\r\n  background-color: var(--bg-primary);\r\n  color: var(--text-primary);\r\n}\r\n\r\n.setup-card {\r\n  background: var(--card-bg);\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 6px var(--shadow-color);\r\n  padding: 2rem;\r\n  width: 100%;\r\n  max-width: 600px;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\nh2 {\r\n  color: var(--text-primary);\r\n  margin-bottom: 0.5rem;\r\n  text-align: center;\r\n}\r\n\r\n.subtitle {\r\n  color: var(--text-secondary);\r\n  opacity: 0.8;\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.setup-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\nlabel {\r\n  font-weight: 500;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.input-with-symbol {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.symbol {\r\n  position: absolute;\r\n  left: 0.75rem;\r\n  color: var(--text-secondary);\r\n  opacity: 0.7;\r\n}\r\n\r\ninput {\r\n  padding: 0.75rem 0.75rem 0.75rem 2rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  width: 100%;\r\n  background-color: var(--bg-primary);\r\n  color: var(--text-primary);\r\n}\r\n\r\ninput:focus {\r\n  outline: none;\r\n  border-color: var(--progress-fill);\r\n  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);\r\n}\r\n\r\n.categories-section {\r\n  margin-top: 2rem;\r\n}\r\n\r\nh3 {\r\n  color: var(--text-primary);\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.category-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.category-item {\r\n  background: var(--bg-primary);\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.category-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.category-name {\r\n  font-weight: 500;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.remove-category {\r\n  background: none;\r\n  border: none;\r\n  color: var(--error-text);\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n}\r\n\r\n.add-category {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.category-select {\r\n  flex: 1;\r\n  padding: 0.75rem;\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  background-color: var(--bg-primary);\r\n  color: var(--text-primary);\r\n}\r\n\r\n.budget-summary {\r\n  background: var(--bg-primary);\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  border: 1px solid var(--border-color);\r\n}\r\n\r\n.summary-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.btn-primary {\r\n  background-color: var(--progress-fill);\r\n  color: white;\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background-color: #43a047;\r\n}\r\n\r\n.btn-primary:disabled {\r\n  opacity: 0.7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: var(--bg-primary);\r\n  color: var(--progress-fill);\r\n  padding: 0.75rem 1.5rem;\r\n  border: 1px solid var(--progress-fill);\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: var(--progress-fill);\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:disabled {\r\n  opacity: 0.7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.error-message {\r\n  color: var(--error-text);\r\n  background-color: var(--error-bg);\r\n  border: 1px solid var(--error-border);\r\n  text-align: center;\r\n  padding: 0.75rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .setup-card {\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .add-category {\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}